# 共享内存
消息队列的读取和写入的过程，都会发生用户态与内核态之间的消息拷贝过程。共享内存很好的解决了这一问题。

每个进程都会维护一个从内存地址到虚拟内存页面之间的映射关系。尽管每个进程都有自己的内存地址，不同的进程可以同时将同一个内存页面映射到自己的地址空间中，从而达到共享内存的目的。

所有进程共享同一块内存，共享内存在各种进程间通信方式中具有最高的效率。

访问共享内存区域和访问进程独有的内存区域一样快，并不需要通过系统调用或者其它需要切入内核的过程来完成。

同时它也避免了对数据的各种不必要的复制。


共享内存的几乎可以认为没有上限，它也是不局限与父子进程，采用跟消息队列类似的定位方式，因为内存是共享的，不存在任何单向的限制，最大的问题就是需要应用程序自己做互斥。
具体操作：
- shmget：申请共享内存
- shmat:建立用户进程空间到共享内存的映射
- shmdt:解除映射关系
- shmctl:回收共享内存空间

---

![总结](https://i0.hdslb.com/bfs/new_dyn/72eb8c0b05e4377c789d63bad2676b8e29529286.png@720w_360h_1e_1c.webp)